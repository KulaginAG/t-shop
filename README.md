# T-Shop
## Описание проекта:
T-Shop - это интернет-магазин одежды из параллельной вселенной. Он имеет 5 миллионов клиентов, число которых постоянно растет. Представим, что ежедневная конверсия в покупку составляет 1% в будние дни и 5% в выходные. В рамках покупки может быть приобретено несколько товаров в разном количестве.

## Цель проекта:
Построить упрощенный ETL-процесс полного цикла (от формирования исходных данных до визуализации).

## Требования:
Нужно сгенерировать 3 таблицы (клиент, товар, продажи) и заливать их в PostgreSQL (RAW-слой). В нем же написать пакет, который на основании raw-таблиц делает другие таблицы с версионностью SCD2. Также должна быть таблица с метаданными для вычисления инкремента с RAW-слоя (отбираются только те записи, у которых время обновления выше максимального времени обновления в целевой таблице на DDS-слое). Затем в CDM-слое строится финальная витрина (также с SCD2).
Далее эти данные переливаются в Clickhouse, и затем используются в Superset для построения дашборда. 
Все должно работать под управлением AirFlow (кроме Superset). Реализация выполнена на основе Docker-контейнеров (кроме генератора данных).

## Используемые инструменты:
- Python (генерация данных)
- PostgreSQL (хранение данных)
- Clickhouse (хранение финальной витрины)
- Superset (визуализация)
- AirFlow (оркестрация потоков)

## Слои
1. RAW (источники с SCD1)
2. DDS (источники с SCD2)
3. CDM (витрина с SCD2)
4. SL (метаданные)

## Сущности:

**Клиент**
- ID
- Имя
- Фамилия
- Дата рождения
- Время обновления записи

**Товар**
- ID
- Наименование
- Категория
- Размер
- Цена
- Время обновления записи

**Продажи**
- ID
- Дата
- Клиент
- Товар
- Количество
- Время обновления записи

**Витрина**:
- Дата продажи
- Клиент
- Возраст клиента
- Товар
- Категория товара
- Размер
- Цена товара
- Количество товара
- Общая стоимость

## Dashboard

Построенный дашборд должен показывать:
- График выручки
- Диаграмма выручки по категориям
- Круговая диаграмма выручки по возрасту
- Сумма выручки
- Количество клиентов
- Среднее количество товаров в чеке
- Средняя сумма чека
- Средний возраст клиентов
- Самый популярный размер
